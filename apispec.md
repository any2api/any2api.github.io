---
layout: page
title: API Spec
weight: 17
---

An API spec for one or multiple executables describes how to run them (invocation, input/parameters, output/results, etc.). This information is used to automatically generate API implementations. An API spec is either generated by a scanner (and manually refined on demand), or it is completely hand-crafted. Technically, an API spec is a JSON file, which is usually named `apispec.json`. You can find a few examples on GitHub:

* [API spec](https://github.com/any2api/any2api-invoker-shell/blob/master/test/smoketest/apispec.json) wrapping a [Shell executable](https://github.com/any2api/any2api-invoker-shell/blob/master/test/smoketest/script.sh)
* [API spec](https://github.com/any2api/any2api-invoker-python/blob/master/test/smoketest/apispec.json) wrapping a [Python executable](https://github.com/any2api/any2api-invoker-python/blob/master/test/smoketest/script.py)
* [API spec](https://github.com/any2api/any2api-invoker-ruby/blob/master/test/smoketest/apispec.json) wrapping a [Ruby executable](https://github.com/any2api/any2api-invoker-ruby/blob/master/test/smoketest/script.rb)
* [API spec](https://github.com/jojow/clartigr/blob/master/apispec.json) with invokers only; executables are dynamically provided at runtime

In the following the complete structure of an API spec is explained in detail.



## API Spec Structure

``` plaintext
{
  "executables": {
    (name): Executable Resource
  },
  "invokers": {
    (name): Invoker Resource
  },
  "implementation": {
    "title":       string,
    "description": string,
    "path":        string,
    "type":        string,
    "interface":   string,
    "ports": [
      string
    ]
  }
}
```

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>executables</strong></td>
      <td>object</td>
      <td>Map of named executables.</td>
    </tr>
    <tr>
      <td>executables.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named executable represented as <a href="#executable-resource">Executable Resource</a>.</td>
    </tr>
    <tr>
      <td><strong>invokers</strong></td>
      <td>object</td>
      <td>Map of named invokers.</td>
    </tr>
    <tr>
      <td>invokers.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named invoker represented as <a href="#invoker-resource">Invoker Resource</a>.</td>
    </tr>
    <tr>
      <td><strong>implementation</strong></td>
      <td>object</td>
      <td>Properties of generated API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>title</strong></td>
      <td>string</td>
      <td>Title of API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>description</strong></td>
      <td>string</td>
      <td>Description of API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>path</strong></td>
      <td>string</td>
      <td>Path to API implementation. This is "." if the API spec is located in the same directory.</td>
    </tr>
    <tr>
      <td>implementation.<strong>type</strong></td>
      <td>string</td>
      <td>Type of implementation, e.g., "node".</td>
    </tr>
    <tr>
      <td>implementation.<strong>interface</strong></td>
      <td>string</td>
      <td>Kind of interface, e.g., "rest".</td>
    </tr>
    <tr>
      <td>implementation.<strong>ports</strong></td>
      <td>list</td>
      <td>Ports exposed by the API implementation.</td>
    </tr>
  </tbody>
</table>

<hr />

<a name="executable-resource"></a>

## Executable Resource

``` plaintext
    {
      "type":         string,
      "description":  string,
      "path":         string,
      "readme_file":  string,
      "invoker_name": string,
      "prepared":     boolean,
      "parameters_schema": {
        (name): Schema Definition Resource
      },
      "parameters_required": [
        string
      ],
      "results_schema": {
        (name): Schema Definition Resource
      }
    }
```

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>type</strong></td>
      <td>string</td>
      <td>Type of executable, e.g., "chef_cookbook".</td>
    </tr>
    <tr>
      <td><strong>description</strong></td>
      <td>string</td>
      <td>Description of the executable.</td>
    </tr>
    <tr>
      <td><strong>path</strong></td>
      <td>string</td>
      <td>Path to the executable, e.g., "./executables/mysql-cookbook".</td>
    </tr>
    <tr>
      <td><strong>readme_file</strong></td>
      <td>string</td>
      <td>README file path, relative to executable's <em>path</em>, e.g., "./docs/README.md".</td>
    </tr>
    <tr>
      <td><strong>invoker_name</strong></td>
      <td>string</td>
      <td>Name of the invoker to be used to run this executable, e.g., "chef-invoker". The invoker must be specified as an <a href="#invoker-resource">Invoker Resource</a> in the same API spec.</td>
    </tr>
    <tr>
      <td><strong>prepared</strong></td>
      <td>boolean</td>
      <td>Indicates whether this executable is prepared to run (e.g., all dependencies are downloaded and packaged).</td>
    </tr>
    <tr>
      <td><strong>parameters_schema</strong></td>
      <td>object</td>
      <td>List and properties of valid parameters (inputs).</td>
    </tr>
    <tr>
      <td>parameters_schema.<strong>(name)</strong></td>
      <td>object</td>
      <td>Schema definition (specified as <a href="#schema-definition-resource">Schema Definition Resource</a>) for an individual, named parameter.</td>
    </tr>
    <tr>
      <td><strong>parameters_required</strong></td>
      <td>list</td>
      <td>Names of parameters that are required.</td>
    </tr>
    <tr>
      <td><strong>results_schema</strong></td>
      <td>object</td>
      <td>List and properties of valid results (outputs).</td>
    </tr>
    <tr>
      <td>results_schema.<strong>(name)</strong></td>
      <td>object</td>
      <td>Schema definition (specified as <a href="#schema-definition-resource">Schema Definition Resource</a>) for an individual, named result.</td>
    </tr>
  </tbody>
</table>

<hr />

<a name="invoker-resource"></a>

## Invoker Resource

``` plaintext
{
  "path":   string,
  "expose": boolean
}
```

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>path</strong></td>
      <td>string</td>
      <td>Path to the invoker, e.g., "./invokers/chef-invoker".</td>
    </tr>
    <tr>
      <td><strong>expose</strong></td>
      <td>boolean</td>
      <td>Indicates whether this invoker is exposed through the generated API to be used directly by providing custom executables at runtime in an ad-hoc manner.</td>
    </tr>
  </tbody>
</table>

<hr />

<a name="schema-definition-resource"></a>

## Schema Definition Resource

``` plaintext
{
  "type":         string,
  "content_type": string,
  "description":  string,
  "default":      any,
  "mapping":      any,
  "json_schema":  object,
  "xml_schema":   string
}
```

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>type</strong></td>
      <td>string</td>
      <td>Type of the parameter or result, i.e., "string", "number", "boolean", "xml_object", "json_object", "json_array", or "binary". Binary data is either represented natively as a collection of bytes (e.g., <a href="https://nodejs.org/api/buffer.html">buffer</a> or <a href="https://nodejs.org/api/stream.html">byte stream</a>) or as <a href="https://tools.ietf.org/html/rfc4648">Base64</a>-encoded string.</td>
    </tr>
    <tr>
      <td><strong>content_type</strong></td>
      <td>string</td>
      <td>MIME type of the parameter's or result's content, e.g., "text/plain; charset=utf-8".</td>
    </tr>
    <tr>
      <td><strong>description</strong></td>
      <td>string</td>
      <td>Description of the parameter or result.</td>
    </tr>
    <tr>
      <td><strong>default</strong></td>
      <td>any</td>
      <td>Default value of the parameter.</td>
    </tr>
    <tr>
      <td><strong>mapping</strong></td>
      <td>any</td>
      <td>Mapping information for the parameter or result, i.e., how the parameter value is mapped at runtime (e.g., environment variable, stdin, file), or from where the result is read at runtime (e.g., stdout, stderr, file).</td>
    </tr>
    <tr>
      <td><strong>json_schema</strong></td>
      <td>object</td>
      <td>A JSON schema to specify the structure of the parameter value or result, if <em>type</em> is "json_object" or "json_array".</td>
    </tr>
    <tr>
      <td><strong>xml_schema</strong></td>
      <td>string</td>
      <td>An XML schema to specify the structure of the parameter value or result, if <em>type</em> is "xml_object".</td>
    </tr>
  </tbody>
</table>
