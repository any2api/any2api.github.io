---
layout: page
title: API Spec
weight: 17
---

An API spec is either generated by a scanner (and manually refined on demand), or it is completely hand-crafted. Technically, an API spec is a JSON file, which is usually named `apispec.json`. You can find a few examples on GitHub:

* [API spec wrapping a Shell executable](https://github.com/any2api/any2api-invoker-shell/blob/master/test/smoketest/apispec.json)
* [API spec wrapping a Python executable](https://github.com/any2api/any2api-invoker-python/blob/master/test/smoketest/apispec.json)
* [API spec wrapping a Ruby executable](https://github.com/any2api/any2api-invoker-ruby/blob/master/test/smoketest/apispec.json)
* [API spec with invokers only](https://github.com/jojow/clartigr/blob/master/apispec.json)

In the following the complete structure of an API spec is explained in detail.



## Structure of API Spec

    {
      "executables": {
        (name): Executable Resource
      },
      "invokers": {
        (name): Invoker Resource
      },
      "implementation": {
        "title":       string,
        "description": string,
        "path":        string,
        "type":        string,
        "interface":   string,
        "ports": [
          string
        ]
      }
    }

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>executables</strong></td>
      <td>object</td>
      <td>Map of named executables.</td>
    </tr>
    <tr>
      <td>executables.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named executable represented as <a href="#executable-resource">Executable Resource</a>.</td>
    </tr>
    <tr>
      <td><strong>invokers</strong></td>
      <td>object</td>
      <td>Map of named invokers.</td>
    </tr>
    <tr>
      <td>invokers.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named invoker represented as <a href="#invoker-resource">Invoker Resource</a>.</td>
    </tr>
    <tr>
      <td><strong>implementation</strong></td>
      <td>object</td>
      <td>Properties of generated API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>title</strong></td>
      <td>string</td>
      <td>Title of API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>description</strong></td>
      <td>string</td>
      <td>Description of API implementation.</td>
    </tr>
    <tr>
      <td>implementation.<strong>path</strong></td>
      <td>string</td>
      <td>Path to API implementation. This is "." if the API spec is located in the same directory.</td>
    </tr>
    <tr>
      <td>implementation.<strong>type</strong></td>
      <td>string</td>
      <td>Type of implementation, e.g., "node".</td>
    </tr>
    <tr>
      <td>implementation.<strong>interface</strong></td>
      <td>string</td>
      <td>Type of interface, e.g., "rest".</td>
    </tr>
    <tr>
      <td>implementation.<strong>ports</strong></td>
      <td>list</td>
      <td>Ports exposed by the API implementation.</td>
    </tr>
  </tbody>
</table>

<hr />

<a name="executable-resource"></a>
## Executable Resource

    {
      "type":         string,
      "description":  string,
      "path":         string,
      "readme_file":  string,
      "invoker_name": string,
      "prepared":     boolean,
      "parameters_schema": {
        (name): {
          "type":        string,
          "description": string,
          "default":     any,
          "mapping":     any,
          "properties":  object
        }
      },
      "parameters_required": [
        string
      ],
      "results_schema": {
        (name): {
          "type":        string,
          "description": string,
          "default":     any,
          "mapping":     any,
          "properties":  object
        }
      }
    }

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>type</strong></td>
      <td>string</td>
      <td>Type of executable, e.g., "chef_cookbook".</td>
    </tr>
    <tr>
      <td><strong>description</strong></td>
      <td>string</td>
      <td>Description of the executable.</td>
    </tr>
    <tr>
      <td><strong>path</strong></td>
      <td>string</td>
      <td>Path to the executable, e.g., "./executables/mysql-cookbook".</td>
    </tr>
    <tr>
      <td><strong>readme_file</strong></td>
      <td>string</td>
      <td>Relative path to a README file, e.g., "./docs/README.md".</td>
    </tr>
    <tr>
      <td><strong>invoker_name</strong></td>
      <td>string</td>
      <td>Name of the invoker to be used to run this executable, e.g., "chef-invoker". The invoker must be specified as an <a href="#invoker-resource">Invoker Resource</a> in the same API spec.</td>
    </tr>
    <tr>
      <td><strong>prepared</strong></td>
      <td>boolean</td>
      <td>Indicates whether this executable is prepared to run (e.g., all dependencies are downloaded and packaged).</td>
    </tr>
    <tr>
      <td><strong>parameters_schema</strong></td>
      <td>object</td>
      <td>List and properties of valid parameters (inputs).</td>
    </tr>
    <tr>
      <td>parameters_schema.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named parameter.</td>
    </tr>
    <tr>
      <td>parameters_schema.(name).<strong>type</strong></td>
      <td>string</td>
      <td>Type of this parameter, e.g., "string".</td>
    </tr>
    <tr>
      <td>parameters_schema.(name).<strong>description</strong></td>
      <td>string</td>
      <td>Description of this parameter.</td>
    </tr>
    <tr>
      <td>parameters_schema.(name).<strong>default</strong></td>
      <td>any</td>
      <td>Default value for this parameter.</td>
    </tr>
    <tr>
      <td>parameters_schema.(name).<strong>mapping</strong></td>
      <td>any</td>
      <td>Mapping information for this parameter, i.e., how the parameter value is mapped at runtime (e.g., environment variable, stdin, file)</td>
    </tr>
    <tr>
      <td>parameters_schema.(name).<strong>properties</strong></td>
      <td>object</td>
      <td>A JSON schema to specify the structure of the parameter value, if the parameter type is "object".</td>
    </tr>
    <tr>
      <td><strong>parameters_required</strong></td>
      <td>list</td>
      <td>Names of parameters that are required.</td>
    </tr>
    <tr>
      <td><strong>results_schema</strong></td>
      <td>object</td>
      <td>List and properties of valid results (outputs).</td>
    </tr>
    <tr>
      <td>results_schema.<strong>(name)</strong></td>
      <td>object</td>
      <td>An individual, named result.</td>
    </tr>
    <tr>
      <td>results_schema.(name).<strong>type</strong></td>
      <td>string</td>
      <td>Type of this result, e.g., "string".</td>
    </tr>
    <tr>
      <td>results_schema.(name).<strong>description</strong></td>
      <td>string</td>
      <td>Description of this result.</td>
    </tr>
    <tr>
      <td>results_schema.(name).<strong>default</strong></td>
      <td>any</td>
      <td>Default value for this result.</td>
    </tr>
    <tr>
      <td>results_schema.(name).<strong>mapping</strong></td>
      <td>any</td>
      <td>Mapping information for this result, i.e., from where the result is read at runtime (e.g., stdout, stderr, file)</td>
    </tr>
    <tr>
      <td>results_schema.(name).<strong>properties</strong></td>
      <td>object</td>
      <td>A JSON schema to specify the structure of the result, if the result type is "object".</td>
    </tr>
  </tbody>
</table>

<hr />

<a name="invoker-resource"></a>
## Invoker Resource

    {
      "path":   string,
      "expose": boolean
    }

<table>
  <thead style="text-align: left;">
    <tr>
      <th>Name</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody style="vertical-align: top;">
    <tr>
      <td><strong>path</strong></td>
      <td>string</td>
      <td>Path to the invoker, e.g., "./invokers/chef-invoker".</td>
    </tr>
    <tr>
      <td><strong>expose</strong></td>
      <td>boolean</td>
      <td>Indicates whether this invoker is exposed through the generated API to be used directly by providing custom executables at runtime in an ad-hoc manner.</td>
    </tr>
  </tbody>
</table>
